(function(N,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("@vueuse/core"),require("tinycolor2"),require("gradient-parser"),require("@popperjs/core"),require("vue-types"),require("@aesoper/normal-utils"),require("lodash-es")):typeof define=="function"&&define.amd?define(["exports","vue","@vueuse/core","tinycolor2","gradient-parser","@popperjs/core","vue-types","@aesoper/normal-utils","lodash-es"],e):(N=typeof globalThis<"u"?globalThis:N||self,e(N.BeeComponents={},N.Vue,N.core,N.tinycolor,N.gradientParser,N.core$1,N.propTypes,N.normalUtils,N.lodashEs))})(this,function(N,e,k,V,ee,ce,C,L,W){"use strict";var Ut=Object.defineProperty;var Zt=(N,e,k)=>e in N?Ut(N,e,{enumerable:!0,configurable:!0,writable:!0,value:k}):N[e]=k;var H=(N,e,k)=>(Zt(N,typeof e!="symbol"?e+"":e,k),k);const Jt="",v=t=>Math.round(t*100)/100;class E{constructor(o){H(this,"instance");H(this,"alphaValue",0);H(this,"redValue",0);H(this,"greenValue",0);H(this,"blueValue",0);H(this,"hueValue",0);H(this,"saturationValue",0);H(this,"brightnessValue",0);H(this,"hslSaturationValue",0);H(this,"lightnessValue",0);H(this,"initAlpha",()=>{const o=this.instance.getAlpha();this.alphaValue=Math.min(1,o)*100});H(this,"initLightness",()=>{const{s:o,l:n}=this.instance.toHsl();this.hslSaturationValue=v(o),this.lightnessValue=v(n)});H(this,"initRgb",()=>{const{r:o,g:n,b:a}=this.instance.toRgb();this.redValue=v(o),this.greenValue=v(n),this.blueValue=v(a)});H(this,"initHsb",()=>{const{h:o,s:n,v:a}=this.instance.toHsv();this.hueValue=Math.min(360,Math.ceil(o)),this.saturationValue=v(n),this.brightnessValue=v(a)});H(this,"toHexString",()=>this.instance.toHexString());H(this,"toRgbString",()=>this.instance.toRgbString());this.instance=V(o),this.initRgb(),this.initHsb(),this.initLightness(),this.initAlpha()}toString(o){return this.instance.toString(o)}get hex(){return this.instance.toHex()}set hex(o){this.instance=V(o),this.initHsb(),this.initRgb(),this.initAlpha(),this.initLightness()}set hue(o){this.saturation===0&&this.brightness===0&&(this.saturationValue=1,this.brightnessValue=1),this.instance=V({h:v(o),s:this.saturation,v:this.brightness,a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.hueValue=v(o)}get hue(){return this.hueValue}set saturation(o){this.instance=V({h:this.hue,s:v(o),v:this.brightness,a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.saturationValue=v(o)}get saturation(){return this.saturationValue}set brightness(o){this.instance=V({h:this.hue,s:this.saturation,v:v(o),a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.brightnessValue=v(o)}get brightness(){return this.brightnessValue}set lightness(o){this.instance=V({h:this.hue,s:this.hslSaturationValue,l:v(o),a:this.alphaValue/100}),this.initRgb(),this.initHsb(),this.lightnessValue=v(o)}get lightness(){return this.lightnessValue}set red(o){const n=this.instance.toRgb();this.instance=V({...n,r:v(o),a:this.alphaValue/100}),this.initHsb(),this.initLightness(),this.redValue=v(o)}get red(){return this.redValue}set green(o){const n=this.instance.toRgb();this.instance=V({...n,g:v(o),a:this.alphaValue/100}),this.initHsb(),this.initLightness(),this.greenValue=v(o)}get green(){return this.greenValue}set blue(o){const n=this.instance.toRgb();this.instance=V({...n,b:v(o),a:this.alphaValue/100}),this.initHsb(),this.initLightness(),this.blueValue=v(o)}get blue(){return this.blueValue}set alpha(o){this.instance.setAlpha(o/100),this.alphaValue=o}get alpha(){return this.alphaValue}get RGB(){return[this.red,this.green,this.blue,this.alpha/100]}get HSB(){return[this.hue,this.saturation,this.brightness,this.alpha/100]}get HSL(){return[this.hue,this.hslSaturationValue,this.lightness,this.alpha/100]}}function te(t,o,n,a){return`rgba(${[t,o,n,a/100].join(",")})`}const F=(t,o,n)=>o<n?t<o?o:t>n?n:t:t<n?n:t>o?o:t,q="color-history",G=8,Qt="",P=(t,o)=>{const n=t.__vccOpts||t;for(const[a,i]of o)n[a]=i;return n},de=e.defineComponent({name:"Alpha",props:{color:C.instanceOf(E),size:C.oneOf(["small","default"]).def("default")},emits:["change"],setup(t,{emit:o}){const n=e.ref(null),a=e.ref(null);let i=t.color||new E;const l=e.reactive({red:i.red,green:i.green,blue:i.blue,alpha:i.alpha});e.watch(()=>t.color,c=>{c&&(i=c,W.merge(l,{red:c.red,green:c.green,blue:c.blue,alpha:c.alpha}))},{deep:!0});const r=e.computed(()=>{const c=te(l.red,l.green,l.blue,0),g=te(l.red,l.green,l.blue,100);return{background:`linear-gradient(to right, ${c} , ${g})`}}),s=()=>{if(n.value&&a.value){const c=l.alpha/100,g=n.value.getBoundingClientRect(),f=a.value.offsetWidth;return Math.round(c*(g.width-f)+f/2)}return 0},d=e.computed(()=>({left:s()+"px",top:0})),S=c=>{c.target!==n.value&&u(c)},u=c=>{if(c.stopPropagation(),n.value&&a.value){const g=n.value.getBoundingClientRect(),f=a.value.offsetWidth;let m=c.clientX-g.left;m=Math.max(f/2,m),m=Math.min(m,g.width-f/2);const p=Math.round((m-f/2)/(g.width-f)*100);i.alpha=p,l.alpha=p,o("change",p)}};return k.tryOnMounted(()=>{const c={drag:g=>{u(g)},end:g=>{u(g)}};n.value&&a.value&&L.DOMUtils.triggerDragEvent(n.value,c)}),{barElement:n,cursorElement:a,getCursorStyle:d,getBackgroundStyle:r,onClickSider:S}}}),he=[(t=>(e.pushScopeId("data-v-18925ba6"),t=t(),e.popScopeId(),t))(()=>e.createElementVNode("div",{class:"vc-alpha-slider__bar-handle"},null,-1))];function ge(t,o,n,a,i,l){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vc-alpha-slider","transparent",{"small-slider":t.size==="small"}])},[e.createElementVNode("div",{ref:"barElement",class:"vc-alpha-slider__bar",style:e.normalizeStyle(t.getBackgroundStyle),onClick:o[0]||(o[0]=(...r)=>t.onClickSider&&t.onClickSider(...r))},[e.createElementVNode("div",{class:e.normalizeClass(["vc-alpha-slider__bar-pointer",{"small-bar":t.size==="small"}]),ref:"cursorElement",style:e.normalizeStyle(t.getCursorStyle)},he,6)],4)],2)}const X=P(de,[["render",ge],["__scopeId","data-v-18925ba6"]]),eo="",ue=[["#fcc02e","#f67c01","#e64a19","#d81b43","#8e24aa","#512da7","#1f87e8","#008781","#05a045"],["#fed835","#fb8c00","#f5511e","#eb1d4e","#9c28b1","#5d35b0","#2097f3","#029688","#4cb050"],["#ffeb3c","#ffa727","#fe5722","#eb4165","#aa47bc","#673bb7","#42a5f6","#26a59a","#83c683"],["#fff176","#ffb74e","#ff8a66","#f1627e","#b968c7","#7986cc","#64b5f6","#80cbc4","#a5d6a7"],["#fff59c","#ffcc80","#ffab91","#fb879e","#cf93d9","#9ea8db","#90caf8","#b2dfdc","#c8e6ca"],["transparent","#ffffff","#dedede","#a9a9a9","#4b4b4b","#353535","#212121","#000000","advance"]],pe=e.defineComponent({name:"Palette",emits:["change"],setup(t,{emit:o}){return{palettes:ue,computedBgStyle:i=>i==="transparent"?i:i==="advance"?{}:{background:V(i).toRgbString()},onColorChange:i=>{o("change",i)}}}}),Ce={class:"vc-compact"},fe=["onClick"];function me(t,o,n,a,i,l){return e.openBlock(),e.createElementBlock("div",Ce,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.palettes,(r,s)=>(e.openBlock(),e.createElementBlock("div",{key:s,class:"vc-compact__row"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r,(d,S)=>(e.openBlock(),e.createElementBlock("div",{key:S,class:"vc-compact__color-cube--wrap",onClick:u=>t.onColorChange(d)},[e.createElementVNode("div",{class:e.normalizeClass(["vc-compact__color_cube",{advance:d==="advance",transparent:d==="transparent"}]),style:e.normalizeStyle(t.computedBgStyle(d))},null,6)],8,fe))),128))]))),128))])}const oe=P(pe,[["render",me],["__scopeId","data-v-b969fd48"]]),to="",be=e.defineComponent({name:"Board",props:{color:C.instanceOf(E),round:C.bool.def(!1),hide:C.bool.def(!0)},emits:["change"],setup(t,{emit:o}){var m,p,y;const n=e.getCurrentInstance(),a={h:((m=t.color)==null?void 0:m.hue)||0,s:1,v:1},i=new E(a).toHexString(),l=e.reactive({hueColor:i,saturation:((p=t.color)==null?void 0:p.saturation)||0,brightness:((y=t.color)==null?void 0:y.brightness)||0}),r=e.ref(0),s=e.ref(0),d=e.ref(),S=e.ref(),u=e.computed(()=>({top:r.value+"px",left:s.value+"px"})),c=()=>{if(n){const b=n.vnode.el;s.value=l.saturation*(b==null?void 0:b.clientWidth),r.value=(1-l.brightness)*(b==null?void 0:b.clientHeight)}},g=b=>{b.target!==S.value&&f(b)},f=b=>{if(n){const z=n.vnode.el,R=z==null?void 0:z.getBoundingClientRect();let M=b.clientX-R.left,D=b.clientY-R.top;M=F(M,0,R.width),D=F(D,0,R.height);const I=M/R.width,K=F(-(D/R.height)+1,0,1);s.value=M,r.value=D,l.saturation=I,l.brightness=K,o("change",I,K)}};return k.tryOnMounted(()=>{n&&n.vnode.el&&d.value&&(L.DOMUtils.triggerDragEvent(d.value,{drag:b=>{f(b)},end:b=>{f(b)}}),e.nextTick(()=>{c()}))}),k.whenever(()=>t.color,b=>{W.merge(l,{hueColor:new E({h:b.hue,s:1,v:1}).toHexString(),saturation:b.saturation,brightness:b.brightness}),c()},{deep:!0}),{state:l,cursorElement:d,getCursorStyle:u,onClickBoard:g}}}),Y=t=>(e.pushScopeId("data-v-058e5db2"),t=t(),e.popScopeId(),t),_e=Y(()=>e.createElementVNode("div",{class:"vc-saturation__white"},null,-1)),ke=Y(()=>e.createElementVNode("div",{class:"vc-saturation__black"},null,-1)),ye=[Y(()=>e.createElementVNode("div",null,null,-1))];function Se(t,o,n,a,i,l){return e.openBlock(),e.createElementBlock("div",{ref:"boardElement",class:e.normalizeClass(["vc-saturation",{"vc-saturation__chrome":t.round,"vc-saturation__hidden":t.hide}]),style:e.normalizeStyle({backgroundColor:t.state.hueColor}),onClick:o[0]||(o[0]=(...r)=>t.onClickBoard&&t.onClickBoard(...r))},[_e,ke,e.createElementVNode("div",{class:"vc-saturation__cursor",ref:"cursorElement",style:e.normalizeStyle(t.getCursorStyle)},ye,4)],6)}const j=P(be,[["render",Se],["__scopeId","data-v-058e5db2"]]),no="",Be=e.defineComponent({name:"Hue",props:{color:C.instanceOf(E),size:C.oneOf(["small","default"]).def("default")},emits:["change"],setup(t,{emit:o}){const n=e.ref(null),a=e.ref(null);let i=t.color||new E;const l=e.reactive({hue:i.hue||0});e.watch(()=>t.color,u=>{u&&(i=u,W.merge(l,{hue:i.hue}))},{deep:!0});const r=()=>{if(n.value&&a.value){const u=n.value.getBoundingClientRect(),c=a.value.offsetWidth;return l.hue===360?u.width-c/2:l.hue%360*(u.width-c)/360+c/2}return 0},s=e.computed(()=>({left:r()+"px",top:0})),d=u=>{u.target!==n.value&&S(u)},S=u=>{if(u.stopPropagation(),n.value&&a.value){const c=n.value.getBoundingClientRect(),g=a.value.offsetWidth;let f=u.clientX-c.left;f=Math.min(f,c.width-g/2),f=Math.max(g/2,f);const m=Math.round((f-g/2)/(c.width-g)*360);i.hue=m,l.hue=m,o("change",m)}};return k.tryOnMounted(()=>{const u={drag:c=>{S(c)},end:c=>{S(c)}};n.value&&a.value&&L.DOMUtils.triggerDragEvent(n.value,u)}),{barElement:n,cursorElement:a,getCursorStyle:s,onClickSider:d}}}),$e=[(t=>(e.pushScopeId("data-v-e1a08576"),t=t(),e.popScopeId(),t))(()=>e.createElementVNode("div",{class:"vc-hue-slider__bar-handle"},null,-1))];function Ve(t,o,n,a,i,l){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vc-hue-slider",{"small-slider":t.size==="small"}])},[e.createElementVNode("div",{ref:"barElement",class:"vc-hue-slider__bar",onClick:o[0]||(o[0]=(...r)=>t.onClickSider&&t.onClickSider(...r))},[e.createElementVNode("div",{class:e.normalizeClass(["vc-hue-slider__bar-pointer",{"small-bar":t.size==="small"}]),ref:"cursorElement",style:e.normalizeStyle(t.getCursorStyle)},$e,6)],512)],2)}const U=P(Be,[["render",Ve],["__scopeId","data-v-e1a08576"]]),lo="",Ee=e.defineComponent({name:"Lightness",props:{color:C.instanceOf(E),size:C.oneOf(["small","default"]).def("default")},emits:["change"],setup(t,{emit:o}){const n=e.ref(null),a=e.ref(null);let i=t.color||new E;const[l,r,s]=i.HSL,d=e.reactive({hue:l,saturation:r,lightness:s});e.watch(()=>t.color,m=>{if(m){i=m;const[p,y,b]=i.HSL;W.merge(d,{hue:p,saturation:y,lightness:b})}},{deep:!0});const S=e.computed(()=>{const m=V({h:d.hue,s:d.saturation,l:.8}).toPercentageRgbString(),p=V({h:d.hue,s:d.saturation,l:.6}).toPercentageRgbString(),y=V({h:d.hue,s:d.saturation,l:.4}).toPercentageRgbString(),b=V({h:d.hue,s:d.saturation,l:.2}).toPercentageRgbString();return{background:[`linear-gradient(to right, rgb(255, 255, 255), ${m}, ${p}, ${y}, ${b}, rgb(0, 0, 0))`,`-webkit-linear-gradient(left, rgb(255, 255, 255), ${m}, ${p}, ${y}, ${b}, rgb(0, 0, 0))`,`-moz-linear-gradient(left, rgb(255, 255, 255), ${m}, ${p}, ${y}, ${b}, rgb(0, 0, 0))`,`-ms-linear-gradient(left, rgb(255, 255, 255), ${m}, ${p}, ${y}, ${b}, rgb(0, 0, 0))`]}}),u=()=>{if(n.value&&a.value){const m=d.lightness,p=n.value.getBoundingClientRect(),y=a.value.offsetWidth;return(1-m)*(p.width-y)+y/2}return 0},c=e.computed(()=>({left:u()+"px",top:0})),g=m=>{m.target!==n.value&&f(m)},f=m=>{if(m.stopPropagation(),n.value&&a.value){const p=n.value.getBoundingClientRect(),y=a.value.offsetWidth;let b=m.clientX-p.left;b=Math.max(y/2,b),b=Math.min(b,p.width-y/2);const z=1-(b-y/2)/(p.width-y);i.lightness=z,o("change",z)}};return k.tryOnMounted(()=>{const m={drag:p=>{f(p)},end:p=>{f(p)}};n.value&&a.value&&L.DOMUtils.triggerDragEvent(n.value,m)}),{barElement:n,cursorElement:a,getCursorStyle:c,getBackgroundStyle:S,onClickSider:g}}}),Ne=[(t=>(e.pushScopeId("data-v-94a50a9e"),t=t(),e.popScopeId(),t))(()=>e.createElementVNode("div",{class:"vc-lightness-slider__bar-handle"},null,-1))];function ve(t,o,n,a,i,l){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vc-lightness-slider",{"small-slider":t.size==="small"}])},[e.createElementVNode("div",{ref:"barElement",class:"vc-lightness-slider__bar",style:e.normalizeStyle(t.getBackgroundStyle),onClick:o[0]||(o[0]=(...r)=>t.onClickSider&&t.onClickSider(...r))},[e.createElementVNode("div",{class:e.normalizeClass(["vc-lightness-slider__bar-pointer",{"small-bar":t.size==="small"}]),ref:"cursorElement",style:e.normalizeStyle(t.getCursorStyle)},Ne,6)],4)],2)}const ne=P(Ee,[["render",ve],["__scopeId","data-v-94a50a9e"]]),co="",we=e.defineComponent({name:"History",props:{colors:C.arrayOf(String).def(()=>[]),round:C.bool.def(!1)},emits:["change"],setup(t,{emit:o}){return{onColorSelect:a=>{o("change",a)}}}}),He={key:0,class:"vc-colorPicker__record"},Re={class:"color-list"},Ae=["onClick"];function Pe(t,o,n,a,i,l){return t.colors&&t.colors.length>0?(e.openBlock(),e.createElementBlock("div",He,[e.createElementVNode("div",Re,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.colors,(r,s)=>(e.openBlock(),e.createElementBlock("div",{key:s,class:e.normalizeClass(["color-item","transparent",{"color-item__round":t.round}]),onClick:d=>t.onColorSelect(r)},[e.createElementVNode("div",{class:"color-item__display",style:e.normalizeStyle({backgroundColor:r})},null,4)],10,Ae))),128))])])):e.createCommentVNode("",!0)}const Z=P(we,[["render",Pe],["__scopeId","data-v-0f657238"]]),ho="",ze=e.defineComponent({name:"Display",props:{color:C.instanceOf(E),disableAlpha:C.bool.def(!1)},emits:["update:color","change"],setup(t,{emit:o}){var d,S,u,c;const n=e.ref("hex"),a=e.reactive({color:t.color,hex:(d=t.color)==null?void 0:d.hex,alpha:Math.floor(((S=t.color)==null?void 0:S.alpha)||100)+"%",rgba:(u=t.color)==null?void 0:u.RGB,previewBgColor:(c=t.color)==null?void 0:c.toRgbString()}),i=e.computed(()=>({background:a.previewBgColor})),l=()=>{n.value=n.value==="rgba"?"hex":"rgba"},r=k.useDebounceFn(g=>{if(!g.target.value)return;let f=parseInt(g.target.value.replace("%",""));f>100&&(g.target.value="100%",f=100),f<0&&(g.target.value="0%",f=0),isNaN(f)&&(g.target.value="100%",f=100),!isNaN(f)&&a.color&&(a.color.alpha=f),o("update:color",a.color),o("change",a.color)},300),s=k.useDebounceFn((g,f)=>{if(g.target.value){if(n.value==="hex"){const m=g.target.value.replace("#","");V(m).isValid()&&a.color&&(a.color.hex=m)}else if(f!==void 0&&a.rgba&&a.color){g.target.value<0&&(g.target.value=0),f===3&&g.target.value>1&&(g.target.value=1),f<3&&g.target.value>255&&(g.target.value=255),a.rgba[f]=Number(g.target.value);const[m,p,y,b]=a.rgba;a.color.hex=V({r:m,g:p,b:y}).toHex(),a.color.alpha=Math.floor(b*100)}o("update:color",a.color),o("change",a.color)}},300);return k.whenever(()=>t.color,g=>{g&&(a.color=g,a.alpha=Math.floor(a.color.alpha)+"%",a.hex=a.color.hex,a.rgba=a.color.RGB)},{deep:!0}),k.whenever(()=>a.color,()=>{a.color&&(a.previewBgColor=a.color.toRgbString())},{deep:!0}),{state:a,getBgColorStyle:i,inputType:n,onInputTypeChange:l,onAlphaBlur:r,onInputChange:s}}}),Ie={class:"vc-display"},Me={class:"vc-current-color vc-transparent"},De={key:0,style:{display:"flex",flex:"1",gap:"4px",height:"100%"}},Le={class:"vc-color-input"},Ke=["value"],Oe={key:0,class:"vc-alpha-input"},We=["value"],Fe={key:1,style:{display:"flex",flex:"1",gap:"4px",height:"100%"}},qe=["value","onInput"];function Ge(t,o,n,a,i,l){return e.openBlock(),e.createElementBlock("div",Ie,[e.createElementVNode("div",Me,[e.createElementVNode("div",{class:"color-cube",style:e.normalizeStyle(t.getBgColorStyle)},null,4)]),t.inputType==="hex"?(e.openBlock(),e.createElementBlock("div",De,[e.createElementVNode("div",Le,[e.createElementVNode("input",{value:t.state.hex,onInput:o[0]||(o[0]=(...r)=>t.onInputChange&&t.onInputChange(...r))},null,40,Ke)]),t.disableAlpha?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Oe,[e.createElementVNode("input",{class:"vc-alpha-input__inner",value:t.state.alpha,onInput:o[1]||(o[1]=(...r)=>t.onAlphaBlur&&t.onAlphaBlur(...r))},null,40,We)]))])):t.state.rgba?(e.openBlock(),e.createElementBlock("div",Fe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.state.rgba,(r,s)=>(e.openBlock(),e.createElementBlock("div",{class:"vc-color-input",key:s},[e.createElementVNode("input",{value:r,onInput:d=>t.onInputChange(d,s)},null,40,qe)]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"vc-input-toggle",onClick:o[2]||(o[2]=(...r)=>t.onInputTypeChange&&t.onInputTypeChange(...r))},e.toDisplayString(t.inputType),1)])}const J=P(ze,[["render",Ge],["__scopeId","data-v-80d589ba"]]),go="",Xe=e.defineComponent({name:"FkColorPicker",components:{Display:J,Alpha:X,Palette:oe,Board:j,Hue:U,Lightness:ne,History:Z},props:{color:C.instanceOf(E),disableHistory:C.bool.def(!1),roundHistory:C.bool.def(!1),disableAlpha:C.bool.def(!1)},emits:["update:color","change","advanceChange"],setup(t,{emit:o}){const n=t.color||new E,a=e.reactive({color:n,hex:n.toHexString(),rgb:n.toRgbString()}),i=e.ref(!1),l=e.computed(()=>({background:a.rgb})),r=()=>{i.value=!1,o("advanceChange",!1)},s=k.useLocalStorage(q,[],{}),d=k.useDebounceFn(()=>{if(t.disableHistory)return;const p=a.color.toRgbString();if(s.value=s.value.filter(y=>!V.equals(y,p)),!s.value.includes(p)){for(;s.value.length>G;)s.value.pop();s.value.unshift(p)}},500),S=p=>{p==="advance"?(i.value=!0,o("advanceChange",!0)):(a.color.hex=p,o("advanceChange",!1))},u=p=>{a.color.alpha=p},c=p=>{a.color.hue=p},g=(p,y)=>{a.color.saturation=p,a.color.brightness=y},f=p=>{a.color.lightness=p},m=p=>{const b=p.target.value.replace("#","");V(b).isValid()&&(a.color.hex=b)};return k.whenever(()=>t.color,p=>{p&&(a.color=p)},{deep:!0}),k.whenever(()=>a.color,()=>{a.hex=a.color.hex,a.rgb=a.color.toRgbString(),d(),o("update:color",a.color),o("change",a.color)},{deep:!0}),{state:a,advancePanelShow:i,onBack:r,onCompactChange:S,onAlphaChange:u,onHueChange:c,onBoardChange:g,onLightChange:f,onInputChange:m,previewStyle:l,historyColors:s}}}),Ye=t=>(e.pushScopeId("data-v-0d5bef46"),t=t(),e.popScopeId(),t),je={class:"vc-fk-colorPicker"},Ue={class:"vc-fk-colorPicker__inner"},Ze={class:"vc-fk-colorPicker__header"},Je=[Ye(()=>e.createElementVNode("div",{class:"back"},null,-1))];function Qe(t,o,n,a,i,l){const r=e.resolveComponent("Palette"),s=e.resolveComponent("Board"),d=e.resolveComponent("Hue"),S=e.resolveComponent("Lightness"),u=e.resolveComponent("Alpha"),c=e.resolveComponent("Display"),g=e.resolveComponent("History");return e.openBlock(),e.createElementBlock("div",je,[e.createElementVNode("div",Ue,[e.createElementVNode("div",Ze,[t.advancePanelShow?(e.openBlock(),e.createElementBlock("span",{key:0,style:{cursor:"pointer"},onClick:o[0]||(o[0]=(...f)=>t.onBack&&t.onBack(...f))},Je)):e.createCommentVNode("",!0)]),t.advancePanelShow?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(r,{key:0,onChange:t.onCompactChange},null,8,["onChange"])),t.advancePanelShow?(e.openBlock(),e.createBlock(s,{key:1,color:t.state.color,onChange:t.onBoardChange},null,8,["color","onChange"])):e.createCommentVNode("",!0),t.advancePanelShow?(e.openBlock(),e.createBlock(d,{key:2,color:t.state.color,onChange:t.onHueChange},null,8,["color","onChange"])):e.createCommentVNode("",!0),t.advancePanelShow?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(S,{key:3,color:t.state.color,onChange:t.onLightChange},null,8,["color","onChange"])),t.disableAlpha?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(u,{key:4,color:t.state.color,onChange:t.onAlphaChange},null,8,["color","onChange"])),e.createVNode(c,{color:t.state.color,"disable-alpha":t.disableAlpha},null,8,["color","disable-alpha"]),t.disableHistory?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(g,{key:5,round:t.roundHistory,colors:t.historyColors,onChange:t.onCompactChange},null,8,["round","colors","onChange"]))])])}const ae=P(Xe,[["render",Qe],["__scopeId","data-v-0d5bef46"]]),po="",Te=e.defineComponent({name:"ChromeColorPicker",components:{Display:J,Alpha:X,Board:j,Hue:U,History:Z},props:{color:C.instanceOf(E),disableHistory:C.bool.def(!1),roundHistory:C.bool.def(!1),disableAlpha:C.bool.def(!1)},emits:["update:color","change"],setup(t,{emit:o}){const n=t.color||new E,a=e.reactive({color:n,hex:n.toHexString(),rgb:n.toRgbString()}),i=e.computed(()=>({background:a.rgb})),l=k.useLocalStorage(q,[],{}),r=k.useDebounceFn(()=>{if(t.disableHistory)return;const c=a.color.toRgbString();if(l.value=l.value.filter(g=>!V.equals(g,c)),!l.value.includes(c)){for(;l.value.length>G;)l.value.pop();l.value.unshift(c)}},500),s=c=>{a.color.alpha=c},d=c=>{a.color.hue=c},S=(c,g)=>{a.color.saturation=c,a.color.brightness=g},u=c=>{c!=="advance"&&(a.color.hex=c)};return k.whenever(()=>t.color,c=>{c&&(a.color=c)},{deep:!0}),k.whenever(()=>a.color,()=>{a.hex=a.color.hex,a.rgb=a.color.toRgbString(),r(),o("update:color",a.color),o("change",a.color)},{deep:!0}),{state:a,previewStyle:i,historyColors:l,onAlphaChange:s,onHueChange:d,onBoardChange:S,onCompactChange:u}}}),xe={class:"vc-chrome-colorPicker"},et={class:"vc-chrome-colorPicker-body"},tt={class:"chrome-controls"},ot={class:"chrome-sliders"};function nt(t,o,n,a,i,l){const r=e.resolveComponent("Board"),s=e.resolveComponent("Hue"),d=e.resolveComponent("Alpha"),S=e.resolveComponent("Display"),u=e.resolveComponent("History");return e.openBlock(),e.createElementBlock("div",xe,[e.createVNode(r,{round:!0,hide:!1,color:t.state.color,onChange:t.onBoardChange},null,8,["color","onChange"]),e.createElementVNode("div",et,[e.createElementVNode("div",tt,[e.createElementVNode("div",ot,[e.createVNode(s,{size:"small",color:t.state.color,onChange:t.onHueChange},null,8,["color","onChange"]),t.disableAlpha?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(d,{key:0,size:"small",color:t.state.color,onChange:t.onAlphaChange},null,8,["color","onChange"]))])]),e.createVNode(S,{color:t.state.color,"disable-alpha":t.disableAlpha},null,8,["color","disable-alpha"]),t.disableHistory?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(u,{key:0,round:t.roundHistory,colors:t.historyColors,onChange:t.onCompactChange},null,8,["round","colors","onChange"]))])])}const re=P(Te,[["render",nt],["__scopeId","data-v-33636434"]]),Q="Vue3ColorPickerProvider",at=(t,o)=>{const n=t.getBoundingClientRect(),a=n.left+n.width/2,i=n.top+n.height/2,l=Math.abs(a-o.clientX),r=Math.abs(i-o.clientY),s=Math.sqrt(Math.pow(l,2)+Math.pow(r,2)),d=r/s,S=Math.acos(d);let u=Math.floor(180/(Math.PI/S));return o.clientX>a&&o.clientY>i&&(u=180-u),o.clientX==a&&o.clientY>i&&(u=180),o.clientX>a&&o.clientY==i&&(u=90),o.clientX<a&&o.clientY>i&&(u=180+u),o.clientX<a&&o.clientY==i&&(u=270),o.clientX<a&&o.clientY<i&&(u=360-u),u};let T=!1;const rt=(t,o)=>{const n=function(i){var l;(l=o.drag)==null||l.call(o,i)},a=function(i){var l;document.removeEventListener("mousemove",n,!1),document.removeEventListener("mouseup",a,!1),document.onselectstart=null,document.ondragstart=null,T=!1,(l=o.end)==null||l.call(o,i)};t&&t.addEventListener("mousedown",i=>{var l;T||(document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n,!1),document.addEventListener("mouseup",a,!1),T=!0,(l=o.start)==null||l.call(o,i))})},Co="",lt={angle:{type:Number,default:0},size:{type:Number,default:16,validator:t=>t>=16},borderWidth:{type:Number,default:1,validator:t=>t>=1},borderColor:{type:String,default:"#666"}},st=e.defineComponent({name:"Angle",props:lt,emits:["update:angle","change"],setup(t,{emit:o}){const n=e.ref(null),a=e.ref(0);e.watch(()=>t.angle,s=>{a.value=s});const i=()=>{let s=Number(a.value);isNaN(s)||(s=s>360||s<0?t.angle:s,a.value=s===360?0:s,o("update:angle",a.value),o("change",a.value))},l=e.computed(()=>({width:t.size+"px",height:t.size+"px",borderWidth:t.borderWidth+"px",borderColor:t.borderColor,transform:`rotate(${a.value}deg)`})),r=s=>{n.value&&(a.value=at(n.value,s)%360,i())};return e.onMounted(()=>{const s={drag:d=>{r(d)},end:d=>{r(d)}};n.value&&rt(n.value,s)}),()=>e.createVNode("div",{class:"bee-angle"},[e.createVNode("div",{class:"bee-angle__round",ref:n,style:l.value},null)])}}),fo="",it=e.defineComponent({name:"GradientColorPicker",components:{Angle:st,Display:J,Alpha:X,Palette:oe,Board:j,Hue:U,Lightness:ne,History:Z},props:{startColor:C.instanceOf(E).isRequired,endColor:C.instanceOf(E).isRequired,startColorStop:C.number.def(0),endColorStop:C.number.def(100),angle:C.number.def(0),type:C.oneOf(["linear","radial"]).def("linear"),disableHistory:C.bool.def(!1),roundHistory:C.bool.def(!1),disableAlpha:C.bool.def(!1),pickerType:C.oneOf(["fk","chrome"]).def("fk")},emits:["update:startColor","update:endColor","update:angle","update:startColorStop","update:endColorStop","startColorChange","endColorChange","advanceChange","angleChange","startColorStopChange","endColorStopChange","typeChange"],setup(t,{emit:o}){const n=e.reactive({startActive:!0,startColor:t.startColor,endColor:t.endColor,startColorStop:t.startColorStop,endColorStop:t.endColorStop,angle:t.angle,type:t.type,startColorRgba:t.startColor.toRgbString(),endColorRgba:t.endColor.toRgbString()}),a=e.inject(Q),i=e.ref(t.pickerType==="chrome"),l=e.ref(),r=e.ref(),s=e.ref();e.watch(()=>[t.startColor,t.endColor,t.angle],h=>{n.startColor=h[0],n.endColor=h[1],n.angle=h[2]}),e.watch(()=>t.type,h=>{n.type=h});const d=e.computed({get:()=>n.startActive?n.startColor:n.endColor,set:h=>{if(n.startActive){n.startColor=h;return}n.endColor=h}}),S=e.computed(()=>{if(s.value&&l.value){const h=n.startColorStop/100,w=s.value.getBoundingClientRect(),B=l.value.offsetWidth;return Math.round(h*(w.width-B)+B/2)}return 0}),u=e.computed(()=>{if(s.value&&r.value){const h=n.endColorStop/100,w=s.value.getBoundingClientRect(),B=r.value.offsetWidth;return Math.round(h*(w.width-B)+B/2)}return 0}),c=e.computed(()=>{let h=`background: linear-gradient(${n.angle}deg, ${n.startColorRgba} ${n.startColorStop}%, ${n.endColorRgba} ${n.endColorStop}%)`;return n.type==="radial"&&(h=`background: radial-gradient(circle, ${n.startColorRgba} ${n.startColorStop}%, ${n.endColorRgba} ${n.endColorStop}%)`),h}),g=h=>{var w;if(n.startActive=!0,s.value&&l.value){const B=(w=s.value)==null?void 0:w.getBoundingClientRect();let A=h.clientX-B.left;A=Math.max(l.value.offsetWidth/2,A),A=Math.min(A,B.width-l.value.offsetWidth/2),n.startColorStop=Math.round((A-l.value.offsetWidth/2)/(B.width-l.value.offsetWidth)*100),o("update:startColorStop",n.startColorStop),o("startColorStopChange",n.startColorStop)}},f=h=>{var w;if(n.startActive=!1,s.value&&r.value){const B=(w=s.value)==null?void 0:w.getBoundingClientRect();let A=h.clientX-B.left;A=Math.max(r.value.offsetWidth/2,A),A=Math.min(A,B.width-r.value.offsetWidth/2),n.endColorStop=Math.round((A-r.value.offsetWidth/2)/(B.width-r.value.offsetWidth)*100),o("update:endColorStop",n.endColorStop),o("endColorStopChange",n.endColorStop)}},m=h=>{const w=h.target,B=parseInt(w.value.replace("°",""));isNaN(B)||(n.angle=B%360),o("update:angle",n.angle),o("angleChange",n.angle)},p=h=>{n.angle=h,o("update:angle",n.angle),o("angleChange",n.angle)},y=h=>{h==="advance"?(i.value=!0,o("advanceChange",!0)):(d.value.hex=h,o("advanceChange",!1)),I()},b=h=>{d.value.alpha=h,I()},z=h=>{d.value.hue=h,I()},R=(h,w)=>{d.value.saturation=h,d.value.brightness=w,I()},M=h=>{d.value.lightness=h,I()},D=()=>{I()},I=()=>{n.startActive?(o("update:startColor",n.startColor),o("startColorChange",n.startColor)):(o("update:endColor",n.endColor),o("endColorChange",n.endColor))},K=()=>{i.value=!1,o("advanceChange",!1)},x=()=>{n.type=n.type==="linear"?"radial":"linear",o("typeChange",n.type)},_=k.useLocalStorage(q,[],{}),$=k.useDebounceFn(()=>{if(t.disableHistory)return;const h=d.value.toRgbString();if(_.value=_.value.filter(w=>!V.equals(w,h)),!_.value.includes(h)){for(;_.value.length>G;)_.value.pop();_.value.unshift(h)}},500);return k.tryOnMounted(()=>{r.value&&l.value&&(L.DOMUtils.triggerDragEvent(r.value,{drag:h=>{f(h)},end:h=>{f(h)}}),L.DOMUtils.triggerDragEvent(l.value,{drag:h=>{g(h)},end:h=>{g(h)}}))}),k.whenever(()=>n.startColor,h=>{n.startColorRgba=h.toRgbString()},{deep:!0}),k.whenever(()=>n.endColor,h=>{n.endColorRgba=h.toRgbString()},{deep:!0}),k.whenever(()=>d.value,()=>{$()},{deep:!0}),{startGradientRef:l,stopGradientRef:r,colorRangeRef:s,state:n,currentColor:d,getStartColorLeft:S,getEndColorLeft:u,gradientBg:c,advancePanelShow:i,onDegreeBlur:m,onCompactChange:y,onAlphaChange:b,onHueChange:z,onBoardChange:R,onLightChange:M,historyColors:_,onBack:K,onDegreeChange:p,onDisplayChange:D,onTypeChange:x,lang:a==null?void 0:a.lang}}}),le=t=>(e.pushScopeId("data-v-431cadee"),t=t(),e.popScopeId(),t),ct={class:"vc-gradient-picker"},dt={class:"vc-gradient-picker__header"},ht={class:"vc-gradient__types"},gt={class:"vc-gradient-wrap__types"},ut={class:"vc-picker-degree-input vc-degree-input"},pt={class:"vc-degree-input__control"},Ct=["value"],ft={class:"vc-degree-input__panel"},mt={class:"vc-degree-input__disk"},bt={class:"vc-gradient-picker__body"},_t={class:"vc-color-range",ref:"colorRangeRef"},kt={class:"vc-color-range__container"},yt={class:"vc-gradient__stop__container"},St=["title"],Bt=[le(()=>e.createElementVNode("span",{class:"vc-gradient__stop--inner"},null,-1))],$t=["title"],Vt=[le(()=>e.createElementVNode("span",{class:"vc-gradient__stop--inner"},null,-1))];function Et(t,o,n,a,i,l){var m,p;const r=e.resolveComponent("Angle"),s=e.resolveComponent("Board"),d=e.resolveComponent("Hue"),S=e.resolveComponent("Palette"),u=e.resolveComponent("Lightness"),c=e.resolveComponent("Alpha"),g=e.resolveComponent("Display"),f=e.resolveComponent("History");return e.openBlock(),e.createElementBlock("div",ct,[e.createElementVNode("div",dt,[e.createElementVNode("div",null,[e.withDirectives(e.createElementVNode("div",{class:"back",style:{cursor:"pointer"},onClick:o[0]||(o[0]=(...y)=>t.onBack&&t.onBack(...y))},null,512),[[e.vShow,t.pickerType==="fk"&&t.advancePanelShow]])]),e.createElementVNode("div",ht,[e.createElementVNode("div",gt,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(["linear","radial"],y=>e.createElementVNode("div",{class:e.normalizeClass(["vc-gradient__type",{active:t.state.type===y}]),key:y,onClick:o[1]||(o[1]=(...b)=>t.onTypeChange&&t.onTypeChange(...b))},e.toDisplayString(t.lang?t.lang[y]:y),3)),64))]),e.withDirectives(e.createElementVNode("div",ut,[e.createElementVNode("div",pt,[e.createElementVNode("input",{value:t.state.angle,onBlur:o[2]||(o[2]=(...y)=>t.onDegreeBlur&&t.onDegreeBlur(...y))},null,40,Ct),e.createTextVNode("deg ")]),e.createElementVNode("div",ft,[e.createElementVNode("div",mt,[e.createVNode(r,{angle:t.state.angle,"onUpdate:angle":o[3]||(o[3]=y=>t.state.angle=y),size:40,onChange:t.onDegreeChange},null,8,["angle","onChange"])])])],512),[[e.vShow,t.state.type==="linear"]])])]),e.createElementVNode("div",bt,[e.createElementVNode("div",_t,[e.createElementVNode("div",kt,[e.createElementVNode("div",{class:"vc-background",style:e.normalizeStyle(t.gradientBg)},null,4),e.createElementVNode("div",yt,[e.createElementVNode("div",{class:e.normalizeClass(["vc-gradient__stop",{"vc-gradient__stop--current":t.state.startActive}]),ref:"startGradientRef",title:(m=t.lang)==null?void 0:m.start,style:e.normalizeStyle({left:t.getStartColorLeft+"px",backgroundColor:t.state.startColorRgba})},Bt,14,St),e.createElementVNode("div",{class:e.normalizeClass(["vc-gradient__stop",{"vc-gradient__stop--current":!t.state.startActive}]),ref:"stopGradientRef",title:(p=t.lang)==null?void 0:p.end,style:e.normalizeStyle({left:t.getEndColorLeft+"px",backgroundColor:t.state.endColorRgba})},Vt,14,$t)])])],512)]),t.advancePanelShow?(e.openBlock(),e.createBlock(s,{key:0,color:t.currentColor,onChange:t.onBoardChange},null,8,["color","onChange"])):e.createCommentVNode("",!0),t.advancePanelShow?(e.openBlock(),e.createBlock(d,{key:1,color:t.currentColor,onChange:t.onHueChange},null,8,["color","onChange"])):e.createCommentVNode("",!0),t.advancePanelShow?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(S,{key:2,onChange:t.onCompactChange},null,8,["onChange"])),t.advancePanelShow?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(u,{key:3,color:t.currentColor,onChange:t.onLightChange},null,8,["color","onChange"])),t.disableAlpha?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(c,{key:4,color:t.currentColor,onChange:t.onAlphaChange},null,8,["color","onChange"])),e.createVNode(g,{color:t.currentColor,"disable-alpha":t.disableAlpha,onChange:t.onDisplayChange},null,8,["color","disable-alpha","onChange"]),t.disableHistory?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(f,{key:5,round:t.roundHistory,colors:t.historyColors,onChange:t.onCompactChange},null,8,["round","colors","onChange"]))])}const se=P(it,[["render",Et],["__scopeId","data-v-431cadee"]]),_o="",Nt=e.defineComponent({name:"WrapContainer",props:{theme:C.oneOf(["white","black"]).def("white"),showTab:C.bool.def(!1),activeKey:C.oneOf(["pure","gradient"]).def("pure")},emits:["update:activeKey","change"],setup(t,{emit:o}){const n=e.reactive({activeKey:t.activeKey}),a=e.inject(Q),i=l=>{n.activeKey=l,o("update:activeKey",l),o("change",l)};return k.whenever(()=>t.activeKey,l=>{n.activeKey=l}),{state:n,onActiveKeyChange:i,lang:a==null?void 0:a.lang}}}),vt={class:"vc-colorpicker--container"},wt={key:0,class:"vc-colorpicker--tabs"},Ht={class:"vc-colorpicker--tabs__inner"},Rt={class:"vc-btn__content"},At={class:"vc-btn__content"};function Pt(t,o,n,a,i,l){var r,s;return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vc-colorpicker",t.theme])},[e.createElementVNode("div",vt,[t.showTab?(e.openBlock(),e.createElementBlock("div",wt,[e.createElementVNode("div",Ht,[e.createElementVNode("div",{class:e.normalizeClass(["vc-colorpicker--tabs__btn",{"vc-btn-active":t.state.activeKey==="pure"}]),onClick:o[0]||(o[0]=d=>t.onActiveKeyChange("pure"))},[e.createElementVNode("button",null,[e.createElementVNode("div",Rt,e.toDisplayString((r=t.lang)==null?void 0:r.pure),1)])],2),e.createElementVNode("div",{class:e.normalizeClass(["vc-colorpicker--tabs__btn",{"vc-btn-active":t.state.activeKey==="gradient"}]),onClick:o[1]||(o[1]=d=>t.onActiveKeyChange("gradient"))},[e.createElementVNode("button",null,[e.createElementVNode("div",At,e.toDisplayString((s=t.lang)==null?void 0:s.gradient),1)])],2),e.createElementVNode("div",{class:"vc-colorpicker--tabs__bg",style:e.normalizeStyle({width:"50%",left:`calc(${t.state.activeKey==="gradient"?50:0}%)`})},null,4)])])):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"default",{},void 0,!0)])],2)}const zt=P(Nt,[["render",Pt],["__scopeId","data-v-0492277d"]]),It={En:{start:"Start",end:"End",pure:"Pure",gradient:"Gradient",linear:"linear",radial:"radial"},"ZH-cn":{start:"开始",end:"结束",pure:"纯色",gradient:"渐变",linear:"线性",radial:"径向"}},So="",Mt={isWidget:C.bool.def(!1),pickerType:C.oneOf(["fk","chrome"]).def("fk"),shape:C.oneOf(["circle","square"]).def("square"),pureColor:{type:[String,Object],default:"#000000"},gradientColor:C.string.def("linear-gradient(90deg, rgba(255, 255, 255, 1) 0%, rgba(0, 0, 0, 1) 100%)"),format:{type:String,default:"rgb"},disableAlpha:C.bool.def(!1),disableHistory:C.bool.def(!1),roundHistory:C.bool.def(!1),useType:C.oneOf(["pure","gradient","both"]).def("pure"),activeKey:C.oneOf(["pure","gradient"]).def("pure"),lang:{type:String,default:"ZH-cn"},zIndex:C.number.def(9999),pickerContainer:{type:[String,HTMLElement],default:"body"},debounce:C.number.def(100),theme:C.oneOf(["white","black"]).def("white")},Dt=e.defineComponent({name:"ColorPicker",components:{FkColorPicker:ae,ChromeColorPicker:re,GradientColorPicker:se,WrapContainer:zt},inheritAttrs:!1,props:Mt,emits:["update:pureColor","pureColorChange","update:gradientColor","gradientColorChange","update:activeKey","activeKeyChange"],setup(t,{emit:o}){e.provide(Q,{lang:e.computed(()=>It[t.lang||"ZH-cn"])});const n=e.reactive({pureColor:t.pureColor||"",activeKey:t.useType==="gradient"?"gradient":t.activeKey,isAdvanceMode:!1}),a=new E("#000"),i=new E("#000"),l=new E(n.pureColor),r=e.reactive({startColor:a,endColor:i,startColorStop:0,endColorStop:100,angle:0,type:"linear",gradientColor:t.gradientColor}),s=e.ref(l),d=e.ref(!1),S=e.ref(null),u=e.ref(null);let c=null;const g=e.computed(()=>({background:n.activeKey!=="gradient"?V(n.pureColor).toRgbString():r.gradientColor})),f=e.computed(()=>n.activeKey==="gradient"?se.name:t.pickerType==="fk"?ae.name:re.name),m=_=>{n.isAdvanceMode=_},p=e.computed(()=>{const _={disableAlpha:t.disableAlpha,disableHistory:t.disableHistory,roundHistory:t.roundHistory,pickerType:t.pickerType};return n.activeKey==="gradient"?{..._,startColor:r.startColor,endColor:r.endColor,angle:r.angle,type:r.type,startColorStop:r.startColorStop,endColorStop:r.endColorStop,onStartColorChange:$=>{r.startColor=$,R()},onEndColorChange:$=>{r.endColor=$,R()},onStartColorStopChange:$=>{r.startColorStop=$,R()},onEndColorStopChange:$=>{r.endColorStop=$,R()},onAngleChange:$=>{r.angle=$,R()},onTypeChange:$=>{r.type=$,R()},onAdvanceChange:m}:{..._,disableAlpha:t.disableAlpha,disableHistory:t.disableHistory,roundHistory:t.roundHistory,color:s.value,onChange:I,onAdvanceChange:m}}),y=()=>{d.value=!0,c?c.update():D()},b=()=>{d.value=!1},z=()=>{var _,$,h,w;try{const[B]=ee.parse(r.gradientColor);if(B&&B.type.includes("gradient")&&B.colorStops.length>=2){const A=B.colorStops[0],ie=B.colorStops[1];r.startColorStop=Number((_=A.length)==null?void 0:_.value)||0,r.endColorStop=Number(($=ie.length)==null?void 0:$.value)||0,B.type==="linear-gradient"&&((h=B.orientation)==null?void 0:h.type)==="angular"&&(r.angle=Number((w=B.orientation)==null?void 0:w.value)||0),r.type=B.type.split("-")[0];const[Ot,Wt,Ft,qt]=A.value,[Gt,Xt,Yt,jt]=ie.value;r.startColor=new E({r:Number(Ot),g:Number(Wt),b:Number(Ft),a:Number(qt)}),r.endColor=new E({r:Number(Gt),g:Number(Xt),b:Number(Yt),a:Number(jt)})}}catch(B){console.log(`[Parse Color]: ${B}`)}},R=k.useDebounceFn(()=>{const _=M();try{r.gradientColor=ee.stringify(_),o("update:gradientColor",r.gradientColor),o("gradientColorChange",r.gradientColor)}catch($){console.log($)}},t.debounce),M=()=>{const _=[],$=r.startColor.RGB.map(B=>B.toString()),h=r.endColor.RGB.map(B=>B.toString()),w=[{type:"rgba",value:[$[0],$[1],$[2],$[3]],length:{value:r.startColorStop+"",type:"%"}},{type:"rgba",value:[h[0],h[1],h[2],h[3]],length:{value:r.endColorStop+"",type:"%"}}];return r.type==="linear"?_.push({type:"linear-gradient",orientation:{type:"angular",value:r.angle+""},colorStops:w}):r.type==="radial"&&_.push({type:"radial-gradient",orientation:[{type:"shape",value:"circle"}],colorStops:w}),_},D=()=>{S.value&&u.value&&(c=ce.createPopper(S.value,u.value,{placement:"auto",modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"flip",options:{allowedAutoPlacements:["top","bottom","left","right"],rootBoundary:"viewport"}}]}))},I=_=>{s.value=_,n.pureColor=_.toString(t.format),K()},K=k.useDebounceFn(()=>{o("update:pureColor",n.pureColor),o("pureColorChange",n.pureColor)},t.debounce);k.onClickOutside(u,()=>{b()});const x=_=>{n.activeKey=_,o("update:activeKey",_),o("activeKeyChange",_)};return k.tryOnMounted(()=>{z()}),k.whenever(()=>t.gradientColor,_=>{_!=r.gradientColor&&(r.gradientColor=_)}),k.whenever(()=>r.gradientColor,()=>{z()}),k.whenever(()=>t.activeKey,_=>{n.activeKey=_}),k.whenever(()=>t.useType,_=>{n.activeKey!=="gradient"&&_==="gradient"?n.activeKey="gradient":n.activeKey="pure"}),k.whenever(()=>t.pureColor,_=>{V.equals(_,n.pureColor)||(n.pureColor=_,s.value=new E(_))},{deep:!0}),{colorCubeRef:S,pickerRef:u,showPicker:d,colorInstance:s,getBgColorStyle:g,onColorChange:I,onShowPicker:y,onActiveKeyChange:x,getComponentName:f,getBindArgs:p,state:n}}});function Lt(t,o,n,a,i,l){const r=e.resolveComponent("WrapContainer");return e.openBlock(),e.createElementBlock(e.Fragment,null,[t.isWidget?(e.openBlock(),e.createBlock(r,{key:0,"active-key":t.state.activeKey,"onUpdate:activeKey":o[0]||(o[0]=s=>t.state.activeKey=s),"show-tab":t.useType==="both",onChange:t.onActiveKeyChange,style:e.normalizeStyle({zIndex:t.zIndex}),theme:t.theme},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.getComponentName),e.mergeProps({key:t.getComponentName},t.getBindArgs),null,16))]),_:1},8,["active-key","show-tab","onChange","style","theme"])):e.createCommentVNode("",!0),t.isWidget?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("div",{class:e.normalizeClass(["vc-color-wrap transparent",{round:t.shape==="circle"}]),ref:"colorCubeRef"},[e.createElementVNode("div",{class:"current-color",style:e.normalizeStyle(t.getBgColorStyle),onClick:o[1]||(o[1]=(...s)=>t.onShowPicker&&t.onShowPicker(...s))},null,4)],2),(e.openBlock(),e.createBlock(e.Teleport,{to:t.pickerContainer},[e.withDirectives(e.createElementVNode("div",{ref:"pickerRef",style:e.normalizeStyle({zIndex:t.zIndex})},[t.showPicker?(e.openBlock(),e.createBlock(r,{key:0,"show-tab":t.useType==="both"&&!t.state.isAdvanceMode,"active-key":t.state.activeKey,"onUpdate:activeKey":o[2]||(o[2]=s=>t.state.activeKey=s),onChange:t.onActiveKeyChange,theme:t.theme},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.getComponentName),e.mergeProps({key:t.getComponentName},t.getBindArgs),null,16))]),_:1},8,["show-tab","active-key","onChange","theme"])):e.createCommentVNode("",!0)],4),[[e.vShow,t.showPicker]])],8,["to"]))],64))],64)}const O=P(Dt,[["render",Lt],["__scopeId","data-v-3ba84123"]]),Kt={install:t=>{t.component(O.name,O),t.component("Vue3"+O.name,O)}};N.ColorPicker=O,N.default=Kt,Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
